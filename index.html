<!DOCTYPE html>
<html lang="en" style="height: 100%">
  <head>
    <meta charset="utf-8" />
    <title>Creating an Anomaly Heatmap</title>
    <link
      rel="icon"
      type="image/png"
      href="https://avatars.githubusercontent.com/u/70767653?v=4"
      sizes="400x400"
    />
    <link rel="stylesheet" type="text/css" href="style.css" />
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.3/gsap.min.js"></script>
    <script src="https://vinccenttt.github.io/animated-sequencing/src/aseq.js"></script>

  </head>
  <body style="background-color: rgb(235, 235, 235); height: 100%; width:100%; margin: 0px; display: flex; align-items: center;">
    <div
      style="display: flex; gap: 60px; margin-left: auto; margin-right: auto; justify-content: center;"
    >
      <div id="text-div" style="display: flex; flex-direction: column; width: 270px">
        <h1 style="margin-bottom: 30px; margin-top: 150px;"> Creating an Anomaly Heatmap</h1>
        <span id="text-0" class="text">
          On the right, the <span style="color: blue">averaged global temperature</span> per month, calculated from Jan 1951 to Dec 1980, is displayed.
          <span style="margin-top: 10px; display: block;"><em>You can navigate to the next step by using arrow keys or the displayed buttons.</em></span>
          <span style="margin-top: 10px; display: block;"><em>To facilitate perceiving differences, the y-axis does not start at zero.</em></span>
        </span>
        <span id="text-1" class="text" >
          Next, we take a closer look at the temperatures during the year <span style="color: red">1887</span> - a year with a globally extremley high anomaly in January.
          This winter is also known as the "Big Die Up", as it especially affected the cattle industry in continental North America and led to major losses of cattle that died as a result of the extreme weather conditions.
        </span>
        <span id="text-2" class="text" >
          The <span style="color: #ff000080">anomalies</span> of each month are highlighted in red - The anomaly is the difference between the actual temperature and the average temperature.
        </span>
        <span id="text-3" class="text" >
          If we smooth the averaged temperature curve down to a straight line, the differences and absolute values of the anomalies become clearer.
        </span>
        <span id="text-4" class="text" >
          Next, we color code the anomaly values relative to the lowest and highest anomaly that ever appeared between 1850 and 2022.
        </span>
        <span id="text-5" class="text" >
          As the anomaly value is now coded in color, we remove the y-axis and create rectangles of equal height.
        </span>
        <span id="text-6" class="text" >
          In order to compare different years to one another or to discover trends, the year 1887 is put in the context of the period from 1850 to 2020.
          Finally, we repeat steps 0 to 5 for every year and display them all at once in a heatmap to be able to identify trends or outliers.
          <span style="margin-top: 10px; display: block;"><em>If you hover over a rectangle, the corresponding year will be shown. When clicking, you zoom into the selected year to have a more detailed looked at the values. (Note that this occludes other parts of the heatmap.)</em></span>
        </span>
      </div>

      <div style="display: flex; flex-direction: column; align-items: center;">
        <div id="visualization" style="width: 550px; height: 550px"></div>
        <div style="display: flex; margin-top: 20px; gap: 10px">
          <button id="prev" class="nav-button">◁</button>
          <button id="next" class="nav-button">▷</button>
        </div>

        <div
          style="
            display: flex;
            gap: 5px;
            justify-content: flex-end;
            margin-bottom: 50px;
            margin-top: 10px;
          "
        >
          <button
            id="step-0"
            class="step-button"
            style="border-top-left-radius: 5px; border-bottom-left-radius: 5px"
          >
            0
          </button>
          <button id="step-1" class="step-button">1</button>
          <button id="step-2" class="step-button">2</button>
          <button id="step-3" class="step-button">3</button>
          <button id="step-4" class="step-button">4</button>
          <button id="step-5" class="step-button">5</button>
          <button
            id="step-6"
            class="step-button"
            style="
              border-top-right-radius: 5px;
              border-bottom-right-radius: 5px;
            "
          >
            6
          </button>
        </div>
      </div>
    </div>

    <script type="module" src="./index.js"></script>
  </body>
</html>
